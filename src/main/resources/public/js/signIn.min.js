(function(d,c){var e=d.documentElement,b="orientationchange" in window?"orientationchange":"resize",a=function(){var f=e.clientWidth;if(!f){return}if(f>=750){e.style.fontSize="100px"}else{e.style.fontSize=100*(f/750)+"px"}};if(!d.addEventListener){return}c.addEventListener(b,a,false);d.addEventListener("DOMContentLoaded",a,false)})(document,window);var calUtil={showYear:2017,showMonth:1,showDays:1,eventName:"load",init:function(a){calUtil.setMonthAndDay();calUtil.draw(a)},draw:function(a){var c=calUtil.drawCal(calUtil.showYear,calUtil.showMonth,a);$(".calendarParent").html(c);var b=calUtil.showYear+"年"+calUtil.showMonth+"月";$(".calendar_month_span").html(b)},setMonthAndDay:function(){switch(calUtil.eventName){case"load":var b=new Date();calUtil.showYear=b.getFullYear();calUtil.showMonth=b.getMonth()+1;break;case"prev":var a=$(".calendar_month_span").html().split("年")[1].split("月")[0];calUtil.showMonth=parseInt(a)-1;if(calUtil.showMonth==0){calUtil.showMonth=12;calUtil.showYear-=1}break;case"next":var a=$(".calendar_month_span").html().split("年")[1].split("月")[0];calUtil.showMonth=parseInt(a)+1;if(calUtil.showMonth==13){calUtil.showMonth=1;calUtil.showYear+=1}break}},getDaysInmonth:function(c,a){var b=new Date(a,c,0);return b.getDate()},bulidCal:function(j,g){var b=new Array();b[0]=new Array(7);b[1]=new Array(7);b[2]=new Array(7);b[3]=new Array(7);b[4]=new Array(7);b[5]=new Array(7);b[6]=new Array(7);var f=new Date(j,g-1,1);var a=f.getDay();var e=calUtil.getDaysInmonth(g,j);var c=1;var h,i;b[0][0]="日";b[0][1]="一";b[0][2]="二";b[0][3]="三";b[0][4]="四";b[0][5]="五";b[0][6]="六";for(h=a;h<7;h++){b[1][h]=c;c++}for(i=2;i<7;i++){for(h=0;h<7;h++){if(c<=e){b[i][h]=c;c++}}}return b},ifHasSigned:function(c,b){var a=false;$.each(c,function(d,e){if(e.signDay==b){a=true;return false}});return a},drawCal:function(f,i,c){var e=calUtil.bulidCal(f,i);var g=new Array();g.push("<div class='sign_main' id='sign_layer'>");g.push("<div class='sign_succ_calendar_title'>");g.push("<div class='calendar_month_span'></div>");g.push("</div>");g.push("<div class='sign' id='sign_cal'>");g.push("<ul class='calendarTitle'>");g.push("<li>"+e[0][0]+"</li>");g.push("<li>"+e[0][1]+"</li>");g.push("<li>"+e[0][2]+"</li>");g.push("<li>"+e[0][3]+"</li>");g.push("<li>"+e[0][4]+"</li>");g.push("<li>"+e[0][5]+"</li>");g.push("<li>"+e[0][6]+"</li>");g.push("</ul>");var h,b;for(b=1;b<6;b++){g.push("<ul>");for(h=0;h<7;h++){var a=calUtil.ifHasSigned(c,e[b][h]);console.log(a);if(a){g.push("<li class='on'>"+(!isNaN(e[b][h])?e[b][h]:" ")+"</li>")}else{g.push("<li>"+(!isNaN(e[b][h])?e[b][h]:" ")+"</li>")}}g.push("</ul>")}g.push("</div>");g.push("</div>");return g.join("")}};$(function(){$(".signButton").on("click",function(){$.post("http://192.168.1.236:8081/zjapp/v1/SignIn/Signing/6ffdc8f9-3d9c-4c10-85f7-9e6199d39f16",function(b){if(b.error_code==0){$(".bg-model").css("display","block")}else{if(b.error_code==1){$(".signButton").css("background","url(../image/alSignButton.png)");$(".signButton").css("background-size","1.92rem 0.54rem");$(".signButton").css("cursor","default");$(".signButton").attr("disabled","")}else{alert("签到失败,请重新签到！")}}})});$(".closeBtn").on("click",function(){$(".bg-model").css("display","none");window.location.reload()});$(".closeBtn1").on("click",function(){$(".bg-model-1").css("display","none");window.location.reload()});$.ajax({type:"get",url:"http://192.168.1.236:8081/zjapp/v1/SignIn/init/6ffdc8f9-3d9c-4c10-85f7-9e6199d39f16",data:{},dataType:"json",success:a});function a(g){var e=[];var c=g.data.currentDate;var h=c.substring(0,4);var j=c.substring(5,7);var d=new Date(h,j,0);$(".lastData").html(d.getDate());for(var f=0;f<g.data.signData.length;f++){var b={};if(g.data.signData[f]==c){$(".signButton").css("background","url(../image/alSignButton.png)");$(".signButton").css("background-size","1.92rem 0.54rem");$(".signButton").css("cursor","default")}b.signDay=g.data.signData[f].substring(g.data.signData[f].length-2);e.push(b)}calUtil.init(e);if(g.data.signinAward.sevendaysaward==1){$(".sevendaysAward").css("background","url(../image/getButton.png)");$(".sevendaysAward").css("cursor","pointer");$(".sevendaysAward").css("background-size","1.44rem 0.5rem")}if(g.data.signinAward.fourteendaysaward==1){$(".fourteendaysAward").css("background","url(../image/getButton.png)");$(".fourteendaysAward").css("cursor","pointer");$(".fourteendaysAward").css("background-size","1.44rem 0.5rem")}if(g.data.signinAward.thirtydaysaward==1){$(".thirtydaysAward").css("background","url(../image/getButton.png)");$(".thirtydaysAward").css("cursor","pointer");$(".thirtydaysAward").css("background-size","1.44rem 0.5rem")}}$(".thirtydaysAward").on("click",function(){$.post("http://192.168.1.236:8081/zjapp/v1/SignIn/drawAward/6ffdc8f9-3d9c-4c10-85f7-9e6199d39f16?awardType=thirty",function(b){if(b.error_code==1){console.log("不符合领取条件！")}else{if(b.error_code==0){var c=$(".thirtydaysAward").prev().text().substring(2,4);$(".bg-model-1").css("display","block");$(".bg-model-1 .bg-model-content span").html("+"+c+"元")}else{if(b.error_code==-1){console.log("本次奖励已经领取！")}}}})});$(".sevendaysAward").on("click",function(){$.post("http://192.168.1.236:8081/zjapp/v1/SignIn/drawAward/6ffdc8f9-3d9c-4c10-85f7-9e6199d39f16?awardType=seven",function(b){if(b.error_code==1){console.log("不符合领取条件！")}else{if(b.error_code==0){var c=$(".sevendaysAward").prev().text().substring(2,4);$(".bg-model-1").css("display","block");$(".bg-model-1 .bg-model-content span").html("+"+c+"元")}else{if(b.error_code==-1){console.log("本次奖励已经领取！")}}}})});$(".fourteendaysAward").on("click",function(){$.post("http://192.168.1.236:8081/zjapp/v1/SignIn/drawAward/6ffdc8f9-3d9c-4c10-85f7-9e6199d39f16?awardType=fourteen",function(b){if(b.error_code==1){console.log("不符合领取条件！")}else{if(b.error_code==0){var c=$(".fourteendaysAward").prev().text().substring(2,4);$(".bg-model-1").css("display","block");$(".bg-model-1 .bg-model-content span").html("+"+c+"元")}else{if(b.error_code==-1){console.log("本次奖励已经领取！")}}}})})});